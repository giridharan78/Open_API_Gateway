
function myInitAgenda()
{
	OutputFolder = "C:\\PerformanceTesting\\Projects\\STD_AUTOOUTPUT"
	IncludeFile("C:\\PerformanceTesting\\Projects\\ACTIVE_Environment.js", WLExecuteScript)
	env_details()
	
	Collector_File = CopyFile(Get_Collector_Offers)
	Environment_File = CopyFile(Get_Env)
}

function myInitClient()
{
		Collector_DataFileParam = WLDataFileParam ( "Collector",Collector_File, 0,",",WLParamRandom,WLParamLocal,WLParamUpdateRound,WLParamCycle);
		Collector_Col1 = WLDataFileField( Collector_DataFileParam, 1);
		Environment_DataFileParam = WLDataFileParam ( "Environment",Environment_File, 0,",",WLParamRandom,WLParamLocal,WLParamUpdateRound,WLParamCycle);
		Environment_Col1 = WLDataFileField( Environment_DataFileParam, 1);
}

/***** WLIDE - JavaScript - ID:25 *****/
function GetOffers()
{

	BeginTransaction("01_Validation_Service")
	
	wlHttp.ReportHttpErrors = false;
	wlHttp.SaveSource = true
	wlGlobals.GetFrames = false 
	wlGlobals.UserAgent = "Apache-HttpClient/4.1.1 (java 1.5)"
	wlHttp.Data["Type"] = "application/vnd.com.nectar+xml"
	wlHttp.Get("http://"+Environment_Col1.getValue()+"/nectar-openapi/collectors/"+Collector_Col1.getValue()+"/offers")
	// Need to parameterize the env and collectorid and password value.
	
	var res = document.wlStatusNumber
	var count = (document.wlSource.split(/offerNumber/g).length-1) ;
	
	if (res==200  && count >= 1) {
	EndTransaction("01_Validation_Service",WLSuccess,false)
	}
	else{
	EndTransaction("01_Validation_Service",WLError,true,"Didn't receive 200")
	}
} // GetOffers()